{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "测试用例",
  "description": "接口测试用例定义",
  "type": "object",
  "properties": {
    "testcases": {
      "type": "array",
      "description": "测试用例列表",
      "items": {
        "type": "object",
        "required": ["name", "description", "strategy", "request", "assertions"],
        "properties": {
          "name": {
            "type": "string",
            "description": "用例名称"
          },
          "description": {
            "type": "string",
            "description": "用例描述"
          },
          "strategy": {
            "type": "string",
            "enum": ["positive", "negative", "boundary", "security", "performance"],
            "description": "测试策略"
          },
          "priority": {
            "type": "string",
            "enum": ["high", "medium", "low"],
            "default": "medium",
            "description": "优先级"
          },
          "tags": {
            "type": "array",
            "items": {"type": "string"},
            "description": "标签"
          },
          "request": {
            "type": "object",
            "description": "请求定义",
            "required": ["method", "url"],
            "properties": {
              "method": {
                "type": "string",
                "enum": ["GET", "POST", "PUT", "DELETE", "PATCH"]
              },
              "url": {
                "type": "string",
                "description": "完整URL或路径"
              },
              "headers": {
                "type": "object",
                "description": "请求头",
                "additionalProperties": {"type": "string"}
              },
              "params": {
                "type": "object",
                "description": "查询参数",
                "additionalProperties": {}
              },
              "body": {
                "description": "请求体",
                "oneOf": [
                  {"type": "object"},
                  {"type": "string"}
                ]
              },
              "timeout": {
                "type": "integer",
                "default": 30,
                "description": "超时时间(秒)"
              }
            }
          },
          "assertions": {
            "type": "array",
            "description": "断言列表",
            "minItems": 1,
            "items": {
              "type": "object",
              "required": ["type", "operator", "expected"],
              "properties": {
                "type": {
                  "type": "string",
                  "enum": ["status_code", "response_time", "header", "body", "json_path", "schema"],
                  "description": "断言类型"
                },
                "target": {
                  "type": "string",
                  "description": "断言目标（JSONPath、Header名等）"
                },
                "operator": {
                  "type": "string",
                  "enum": ["equals", "not_equals", "contains", "not_contains", "greater_than", "less_than", "matches", "exists", "not_exists"],
                  "description": "比较操作符"
                },
                "expected": {
                  "description": "期望值"
                },
                "description": {
                  "type": "string",
                  "description": "断言描述"
                }
              }
            }
          },
          "setup": {
            "type": "array",
            "description": "前置步骤",
            "items": {"type": "string"}
          },
          "teardown": {
            "type": "array",
            "description": "清理步骤",
            "items": {"type": "string"}
          }
        }
      }
    }
  },
  "required": ["testcases"]
}
